apiVersion: apps/v1
kind: Deployment
metadata:
  name: load-test
  labels:
    app: loadtest
    name: load-test
spec:
  replicas: 2
  selector:
    matchLabels:
      app: loadtest
  template:
    metadata:
      labels:
        app: loadtest
        name: load-test
    spec:
      containers:
      - name: load-test
        image: uditgaurav/load-gen
        command: ["/bin/sh"]
        args: ["-c", "sleep 1; locust --host https://fwszb6tuy0.execute-api.us-east-2.amazonaws.com/default/microservice-read-write-dynamo?TableName=hce-test-db -f config/locustfile.py --users 1000 --spawn-rate 1000 --headless; sleep 1000000"]
      nodeSelector:
        beta.kubernetes.io/os: linux
